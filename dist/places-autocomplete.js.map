{"version":3,"file":"places-autocomplete.js","sources":["../PlacesAutocomplete.js"],"sourcesContent":["import \"./places-autocomplete.css\";\n\n/**\n * A flexible and customisable Places Autocomplete widget powered by the Google Maps Places API.\n *\n * Features:\n * - Dynamic Google Maps API loading\n * - Debounced input for optimized API requests\n * - Keyboard navigation (Arrow keys, Enter, Escape)\n * - Session token management for cost-effective API usage\n * - Customizable styling and behavior\n *\n * @author Alexander Pechkarev <alexpechkarev@gmail.com>\n * @license MIT\n */\nexport class PlacesAutocomplete {\n  // --- Private Properties (using # or _ prefix by convention) ---\n  #containerId; // Container ID where the autocomplete widget will be rendered.\n  #pacEl;\n  #googleMapsApiKey;\n  #googleMapsApiVersion;\n  #options;\n  #request;\n  #inputElement;\n  #container;\n  #ul;\n  #kbdEscape;\n  #kbdUp;\n  #kbdDown;\n  #allSuggestions = [];\n  #currentSuggestion = -1;\n  #onDataCallback; // For user-provided data callback\n  #onErrorCallback; // For user-provided error callback\n  #debouncedMakeAcRequest; // Declare without initializing here\n  #defaultOptions = {\n    // Default options for the autocomplete widget.\n    autofocus: false, // Automatically focus the input on load.\n    autocomplete: \"off\", // HTML autocomplete attribute for the input.\n    placeholder: \"Start typing your address ...\", // Placeholder text for the input.\n    distance: false, // Show distance in suggestions (requires origin in request).\n    distance_units: \"km\", // Units for distance ('km' or 'miles').\n    label: \"\", // Optional label text above the input.\n    debounce: 100, // Debounce delay (ms) for API requests.\n    clear_input: false, // Clear input .\n    debug: false, // Enable debug mode (not implemented in this version).\n    response_type: \"json\", // Return format: 'json' for JSON object, 'place' for Google Maps Place instance.\n    show_place_type: false, // Display place type icons (mutually exclusive with distance).\n  };\n  #defaultClasses = {\n    // CSS classes for various parts of the widget.\n    section: \"\", // Outer section container.\n    container: \"pac-container\", // \"relative z-10 transform rounded-xl mt-4\", // Main container div.\n    icon_container: \"pac-icon-container\", //\"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3\", // Container for the search icon.\n    icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"pac-w-5 pac-h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"11\" cy=\"11\" r=\"8\" /><path d=\"m21 21-4.3-4.3\" /></svg>', // SVG for the search icon.\n    input: \"pac-input\", //\"border-1 w-full rounded-md border-0 shadow-sm bg-gray-100 px-4 py-2.5 pl-10 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 sm:text-sm\", // Input field.\n    kbd_container: \"pac-kbd-container\", //\"absolute inset-y-0 right-0 flex py-1.5 pr-1.5\", // Container for keyboard hints.\n    kbd_escape: \"pac-kbd-escape\", //\"inline-flex items-center rounded border border-gray-300 px-1 font-sans text-xs text-gray-500 w-8 mr-1\", // Escape key hint.\n    kbd_up: \"pac-kbd-up\", //\"inline-flex items-center justify-center rounded border border-gray-300 px-1 font-sans text-xs text-gray-500 w-6\", // Up arrow key hint.\n    kbd_down: \"pac-kbd-down\", //\"inline-flex items-center rounded border border-gray-400 px-1 font-sans text-xs text-gray-500 justify-center w-6\", // Down arrow key hint.\n    kbd_active: \"pac-kbd-active\", //\"bg-indigo-500 text-white\", // Class for active keyboard hint.\n    ul: \"pac-ul\", //\"absolute z-50 -mb-2 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm divide-y divide-gray-100\", // Suggestions list (ul).\n    li: \"pac-li\", //\"z-50 cursor-default select-none py-2 px-2 lg:px-4 text-gray-900 hover:bg-indigo-500 hover:text-white\", // Suggestion item (li).\n    li_current: \"pac-li-current\", //\"bg-indigo-500\", // Class for the currently selected suggestion item.\n    li_button: \"pac-li-button\", //\"block w-full flex justify-between\", // Link element within a suggestion item.\n    li_button_current: \"pac-li-button-current\", //\"text-white\", // Class for the link in the currently selected suggestion item.\n    li_div_container: \"pac-li-div-container\", //\"flex min-w-0 gap-x-4\", // Container div within the suggestion link.\n    li_div_p_container: \"pac-li-div-p-container\",\n    li_div_one: \"pac-li-div-one\", //\"min-w-0 flex-auto\", // First inner div (for place name).\n    li_div_one_p: \"pac-li-div-one-p\", //\"text-sm/6\", // Paragraph for the place name.\n    map_icon_svg: \"pac-map-icon-svg\",\n    map_pin_icon:\n      '<path d=\"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\"/><circle cx=\"12\" cy=\"10\" r=\"3\"/>',\n    li_div_one_p_secondaryText: \"pac-li-div-one-p-secondaryText\",\n    li_div_two: \"pac-li-div-two\", //\"shrink-0 flex flex-col items-end min-w-16\", // Second inner div (for distance).\n    li_div_two_p: \"pac-li-div-two-p\", //\"mt-1 text-xs/5\", // Paragraph for the distance.\n    li_div_two_p_place_type: \"pac-li-div-two-p-place_type\", // Container for place type display.\n    li_div_two_p_place_type_icon: \"pac-li-div-two-p-place_type-icon\", // The place type icon element.\n    li_div_two_p_place_type_label: \"pac-li-div-two-p-place_type-label\", // The place type label text.\n    highlight: \"pac-highlight\", //\"font-bold\", // Class for highlighting matched text in suggestions.\n  };\n  #defaultRequestParams = {\n    // Default parameters for the autocomplete request.\n    input: \"\", // Initial input value (empty).\n    // includedRegionCodes: [\"GB\"], // Default region codes to include in suggestions.\n    // language: \"en-gb\",\n    // region: \"GB\",\n  };\n  #fetchFields = [\"formattedAddress\", \"addressComponents\"];\n  #defaultFetchFields = [\"formattedAddress\", \"addressComponents\"]; // Fields to fetch for the selected place (can be extended).\n  // Itinerary category mapping\n  #ITINERARY_CATEGORIES = {\n    // --- TRANSPORT & AUTO ---\n    car_rental: \"Automotive\",\n    car_dealer: \"Automotive\",\n    gas_station: \"Automotive\",\n    electric_vehicle_charging_station: \"Automotive\",\n    parking: \"Automotive\",\n    airport: \"Airport\",\n    bus_station: \"Transport\",\n    train_station: \"Train Station\",\n    subway_station: \"Subway Station\",\n    taxi_stand: \"Transport\",\n    ferry_terminal: \"Transport\",\n\n    // --- DINING & NIGHTLIFE ---\n    restaurant: \"Food and Drink\",\n    cafe: \"Food and Drink\",\n    coffee_shop: \"Food and Drink\",\n    bar: \"Food and Drink\",\n    pub: \"Food and Drink\",\n    night_club: \"Food and Drink\",\n    bakery: \"Food and Drink\",\n    fast_food_restaurant: \"Food and Drink\",\n    ice_cream_shop: \"Food and Drink\",\n    pizza_restaurant: \"Food and Drink\",\n    steak_house: \"Food and Drink\",\n    sushi_restaurant: \"Food and Drink\",\n\n    // --- LODGING ---\n    hotel: \"Lodging\",\n    hostel: \"Lodging\",\n    motel: \"Lodging\",\n    resort_hotel: \"Lodging\",\n    bed_and_breakfast: \"Lodging\",\n    campground: \"Lodging\",\n    rv_park: \"Lodging\",\n    lodging: \"Lodging\",\n    cottage: \"Lodging\",\n    inn: \"Lodging\",\n    guest_house: \"Lodging\",\n\n    // --- SIGHTSEEING & CULTURE ---\n    tourist_attraction: \"Sightseeing\",\n    museum: \"Sightseeing\",\n    art_gallery: \"Sightseeing\",\n    cultural_landmark: \"Sightseeing\",\n    historical_landmark: \"Sightseeing\",\n    monument: \"Sightseeing\",\n    performing_arts_theater: \"Sightseeing\",\n    aquarium: \"Sightseeing\",\n    zoo: \"Sightseeing\",\n    visitor_center: \"Sightseeing\",\n    town_square: \"Sightseeing\",\n    landmark: \"Sightseeing\",\n    place_of_worship: \"Sightseeing\",\n\n    // --- RECREATION & PARKS ---\n    park: \"Recreation\",\n    national_park: \"Recreation\",\n    state_park: \"Recreation\",\n    beach: \"Recreation\",\n    hiking_area: \"Recreation\",\n    amusement_park: \"Recreation\",\n    water_park: \"Recreation\",\n    botanical_garden: \"Recreation\",\n    golf_course: \"Recreation\",\n    gym: \"Recreation\",\n    natural_feature: \"Recreation\",\n\n    // --- SHOPPING ---\n    shopping_mall: \"Shopping\",\n    supermarket: \"Shopping\",\n    grocery_store: \"Shopping\",\n    clothing_store: \"Shopping\",\n    electronics_store: \"Shopping\",\n    souvenir_shop: \"Shopping\", // Simplified name\n    gift_shop: \"Shopping\",\n    duty_free_store: \"Shopping\",\n\n    // --- ESSENTIAL SERVICES ---\n    hospital: \"Health\",\n    pharmacy: \"Health\",\n    atm: \"Finance\",\n    bank: \"Finance\",\n    post_office: \"Services\",\n    police: \"Services\",\n\n    // --- GEOGRAPHICAL ---\n    neighborhood: \"Geographical\",\n    sublocality: \"Geographical\",\n\n    // --- NAVIGATION ---\n    route: \"Navigation\",\n    street_address: \"Navigation\",\n    intersection: \"Navigation\",\n\n    // -- CITY --\n    locality: \"City\",\n    administrative_area_level_4: \"City\",\n    country: \"Country\",\n    administrative_area_level_1: \"City\",\n    administrative_area_level_2: \"City\",\n    administrative_area_level_3: \"City\",\n    administrative_area_level_5: \"City\",\n    sublocality_level_1: \"Neighborhood\",\n    sublocality_level_2: \"Neighborhood\",\n    sublocality_level_3: \"Neighborhood\",\n    sublocality_level_4: \"Neighborhood\",\n    sublocality_level_5: \"Neighborhood\",\n\n    // --- DEFAULT ---\n    default: \"Default\",\n  };\n  // Mapping of itinerary categories to SVG icons (using Lucide icons for simplicity)\n  #ITINERARY_SVG_ICONS = {\n    Automotive: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2\"/><circle cx=\"7\" cy=\"17\" r=\"2\"/><path d=\"M9 17h6\"/><circle cx=\"17\" cy=\"17\" r=\"2\"/></svg>`,\n\n    Transport: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z\"/></svg>`,\n\n    \"Food and Drink\": `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2\"/><path d=\"M7 2v20\"/><path d=\"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7\"/></svg>`,\n\n    Lodging: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M2 4v16\"/><path d=\"M2 8h18a2 2 0 0 1 2 2v10\"/><path d=\"M2 17h20\"/><path d=\"M6 8v9\"/></svg>`,\n\n    Sightseeing: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-binoculars-icon lucide-binoculars\"><path d=\"M10 10h4\"/><path d=\"M19 7V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3\"/><path d=\"M20 21a2 2 0 0 0 2-2v-3.851c0-1.39-2-2.962-2-4.829V8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2z\"/><path d=\"M 22 16 L 2 16\"/><path d=\"M4 21a2 2 0 0 1-2-2v-3.851c0-1.39 2-2.962 2-4.829V8a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2z\"/><path d=\"M9 7V4a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v3\"/></svg>`,\n\n    Recreation: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-kayak-icon lucide-kayak\"><path d=\"M18 17a1 1 0 0 0-1 1v1a2 2 0 1 0 2-2z\"/><path d=\"M20.97 3.61a.45.45 0 0 0-.58-.58C10.2 6.6 6.6 10.2 3.03 20.39a.45.45 0 0 0 .58.58C13.8 17.4 17.4 13.8 20.97 3.61\"/><path d=\"m6.707 6.707 10.586 10.586\"/><path d=\"M7 5a2 2 0 1 0-2 2h1a1 1 0 0 0 1-1z\"/></svg>`,\n\n    Shopping: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z\"/><path d=\"M3 6h18\"/><path d=\"M16 10a4 4 0 0 1-8 0\"/></svg>`,\n\n    Health: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M12 7v4\"/><path d=\"M14 21v-3a2 2 0 0 0-4 0v3\"/><path d=\"M14 9h-4\"/><path d=\"M18 11h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2\"/><path d=\"M18 21V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16\"/></svg>`,\n\n    Finance: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"20\" height=\"14\" x=\"2\" y=\"5\" rx=\"2\"/><line x1=\"2\" y1=\"10\" x2=\"22\" y2=\"10\"/></svg>`,\n\n    Geographical: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m20 20-6-10.6c-.4-.7-1.5-.7-1.9 0L6 20\"/><path d=\"M7 16h10\"/><path d=\"M12 4a8 8 0 0 1 8 8v2a2 2 0 0 1-2 2h-1\"/><path d=\"M7 16H6a2 2 0 0 1-2-2v-2a8 8 0 0 1 8-8\"/></svg>`,\n\n    Navigation: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-navigation-icon lucide-navigation\"><polygon points=\"3 11 22 2 13 21 11 13 3 11\"/></svg>`,\n\n    City: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-building2-icon lucide-building-2\"><path d=\"M10 12h4\"/><path d=\"M10 8h4\"/><path d=\"M14 21v-3a2 2 0 0 0-4 0v3\"/><path d=\"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2\"/><path d=\"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16\"/></svg>`,\n\n    District: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-land-plot-icon lucide-land-plot\"><path d=\"m12 8 6-3-6-3v10\"/><path d=\"m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12\"/><path d=\"m6.49 12.85 11.02 6.3\"/><path d=\"M17.51 12.85 6.5 19.15\"/></svg>`,\n\n    Airport: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-plane-icon lucide-plane\"><path d=\"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z\"/></svg>`,\n\n    \"Subway Station\": `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-subway-icon lucide-subway\"><path d=\"M12 22a10 10 0 0 0 10-10V8l-5-5H7L2 8v4a10 10 0 0 0 10 10Z\"/><path d=\"M12 22V8\"/><path d=\"M7 13h10\"/><path d=\"M7 17h10\"/></svg>`,\n\n    \"Train Station\": `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"  style=\"display:inline-block\"; viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-train-icon lucide-train\"><path d=\"M2 10h20\"/><path d=\"M2 10a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5Z\"/><circle cx=\"7\" cy=\"15\" r=\"2\"/><circle cx=\"17\" cy=\"15\" r=\"2\"/></svg>`,\n\n    Default: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" style=\"display:inline-block\";  viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\"/><circle cx=\"12\" cy=\"10\" r=\"3\"/></svg>`,\n  };\n  /**\n   * Class constructor for PacAutocomplete.\n   * Initializes the autocomplete widget with the provided configuration.\n   * @param {Object} config - Configuration object for the autocomplete widget.\n   * @param {string} config.containerId - ID of the container element for the widget.\n   * @param {string} config.googleMapsApiKey - Google Maps API key.\n   * @param {string} [config.googleMapsApiVersion] - Version of the Google Maps API to use (default: \"weekly\").\n   * @param {Object} [config.options] - Additional options for the widget (e.g., classes, callbacks).\n   * @param {Object} [config.requestParams] - Parameters for the autocomplete request (e.g., input, region).\n   * @param {*} config\n   */\n  constructor(config) {\n    if (!config || !config.containerId || !config.googleMapsApiKey) {\n      throw new Error(\n        \"PacAutocomplete: Missing required configuration (containerId, googleMapsApiKey).\",\n      );\n    }\n\n    this.#containerId = config.containerId; // Store the configuration object\n    this.#pacEl = document.getElementById(config.containerId);\n    if (!this.#pacEl) {\n      throw new Error(\n        `PacAutocomplete: Container element with ID \"${config.containerId}\" not found.`,\n      );\n    }\n\n    this.#googleMapsApiKey = config.googleMapsApiKey;\n    this.#googleMapsApiVersion = config.googleMapsApiVersion || \"weekly\";\n\n    // Merge user options with defaults\n    this.#options = {\n      ...this.#defaultOptions, // Default options\n      ...config.options, // User-defined options override defaults\n    };\n    // Ensure classes are deeply merged if user provides partial classes\n    if (config.options && config.options.classes) {\n      this.#options.classes = {\n        ...this.#defaultClasses,\n        ...config.options.classes,\n      };\n    } else {\n      this.#options.classes = this.#defaultClasses; // Use default classes if none provided\n    }\n\n    // Ensure distance and show_place_type are mutually exclusive\n    if (this.#options.show_place_type && this.#options.distance) {\n      this.#options.distance = false; // Disable distance when show_place_type is enabled\n    }\n\n    if (this.#options.debug) {\n      console.log(\"___debug constructor options:\");\n      console.log(this.#options);\n    }\n\n    if (config.fetchFields && Array.isArray(config.fetchFields)) {\n      this._setFetchFields(config.fetchFields); // Set fetch fields from user config\n    }\n\n    // Set default response and error callbacks if not provided\n    this.#onDataCallback =\n      config.onResponse ||\n      ((place) => {\n        console.info(\"---------Default onResponse not provided---------\");\n        console.info(\"Selected Place:\", JSON.stringify(place, null, 2));\n      });\n    this.#onErrorCallback =\n      config.onError ||\n      ((error) => {\n        console.error(\"---------Default onError not provided---------\");\n        console.error(\"PAC Error:\", error);\n      });\n\n    if (config.requestParams && Object.keys(config.requestParams).length > 0) {\n      this.#request = {\n        ...this.#defaultRequestParams,\n        ...config.requestParams,\n      };\n    } else {\n      this.#request = { ...this.#defaultRequestParams }; // Use defaults if no requestParams provided\n    }\n\n    if (this.#options.debug) {\n      console.log(\"___debug constructor requestParams:\", this.#request);\n    }\n\n    this._initialiseDebouncedRequest(); // Initialize the debounced request function\n\n    this._init(); // Underscore prefix for internal initialization method\n  }\n\n  // --- Private Initialization Method ---\n  async _init() {\n    try {\n      // check if google maps api is already loaded\n      if (typeof google === \"undefined\" || !google.maps) {\n        // Load the Google Maps API dynamically\n        await this._loadGoogleMapsApi({\n          key: this.#googleMapsApiKey,\n          v: this.#googleMapsApiVersion,\n        });\n      }\n      this._createPACStructure();\n      await this._initializeAutocomplete();\n    } catch (error) {\n      this.#onErrorCallback(error);\n    }\n  }\n\n  /**\n   * Initializes the debounced request function for fetching autocomplete suggestions.\n   * This function is called on initialization and when options are updated.\n   *\n   * @private\n   */\n  _initialiseDebouncedRequest() {\n    this.#debouncedMakeAcRequest = this._debounce(async () => {\n      if (!this.#inputElement || !this.#inputElement.value) {\n        this._reset();\n        if (this.#inputElement)\n          this.#inputElement.setAttribute(\"aria-expanded\", \"false\");\n        return;\n      }\n\n      this.#request.input = this.#inputElement.value;\n\n      try {\n        const { suggestions } =\n          // eslint-disable-next-line no-undef\n          await google.maps.places.AutocompleteSuggestion.fetchAutocompleteSuggestions(\n            this.#request,\n          );\n\n        // Display suggestions\n        if (suggestions && suggestions.length > 0) {\n          const suggestionElements = await Promise.all(\n            this._createSuggestionElements(suggestions),\n          );\n          this.#ul.replaceChildren(...suggestionElements);\n          this.#ul.style.display = \"block\";\n          this.#inputElement.setAttribute(\"aria-expanded\", \"true\");\n        } else {\n          // No suggestions found\n          this._reset(); // Clear any old suggestions\n          this.#inputElement.setAttribute(\"aria-expanded\", \"false\");\n          // Optionally display a \"no results\" message in the 'ul'\n        }\n      } catch (error) {\n        this.#onErrorCallback(error);\n        this._reset();\n      }\n    }, this.#options.debounce); // Default debounce to 100ms if not set\n  }\n  /**\n   * Sets the fields to fetch for the selected place.\n   * @param {Array<string>} fields - The fields to fetch.\n   */\n  _setFetchFields(fields) {\n    if (Array.isArray(fields) && fields.length > 0) {\n      this.#fetchFields = [\n        ...new Set([...this.#defaultFetchFields, ...fields]),\n      ].filter((e) => e); // Ensure unique and non-empty fields\n    }\n  }\n\n  /**\n   * Creates a debounced version of a function.\n   *\n   * @private\n   * @param {Function} func - The function to debounce\n   * @param {number} wait - Delay in milliseconds\n   * @returns {Function} Debounced function\n   */\n  _debounce(func, wait) {\n    let timeout = null;\n    return function executedFunction(...args) {\n      const later = () => {\n        timeout = null;\n        func(...args); // Call original function\n      };\n      if (timeout !== null) {\n        clearTimeout(timeout); // Clear the previous timeout\n      }\n      timeout = setTimeout(later, wait ?? 100); // Set the new timeout\n    };\n  }\n  /**\n   * Formats a distance value from meters to the specified unit.\n   *\n   * @private\n   * @param {number|null|undefined} distance - Distance in meters\n   * @param {('km'|'miles')} units - Target unit for conversion\n   * @returns {string|null} Formatted distance string or null if invalid\n   */\n  _formatDistance(distance, units) {\n    if (\n      typeof distance !== \"number\" ||\n      !this.#options.distance ||\n      this.#options.show_place_type\n    ) {\n      return null; // Return null if distance isn't shown, show_place_type is enabled, or invalid\n    }\n    let value;\n    let unitLabel;\n    if (units === \"km\") {\n      value = (distance / 1000).toFixed(2);\n      unitLabel = \"km\";\n    } else {\n      // Default to miles if not 'km'\n      value = (distance / 1609.34).toFixed(2);\n      unitLabel = \"miles\";\n    }\n    // Avoid showing \".00\"\n    value = value.replace(/\\.00$/, \"\");\n    return `${value} ${unitLabel}`;\n  }\n\n  /**\n   * Dynamically loads the Google Maps JavaScript API using the importLibrary method.\n   * This is the standard approach recommended by Google.\n   * @see https://developers.google.com/maps/documentation/javascript/load-maps-js-api\n   * @param {object} g - Configuration object for the API loader (key, v, libraries, etc.).\n   */\n  async _loadGoogleMapsApi(g) {\n    var h, // Promise tracking API load\n      a, // Script element\n      k, // Loop variable for config keys\n      p = \"The Google Maps JavaScript API\", // Error message prefix\n      c = \"google\", // Global namespace\n      l = \"importLibrary\", // Loader function name\n      q = \"__ib__\", // Internal callback name\n      m = document, // Document reference\n      b = window; // Window reference\n    b = b[c] || (b[c] = {}); // Ensure google namespace exists\n    var d = b.maps || (b.maps = {}), // Ensure google.maps namespace exists\n      r = new Set(), // Set to track requested libraries\n      e = new URLSearchParams(), // URL parameters for the API script\n      u = () =>\n        // Function to initiate API loading (if not already started)\n        h ||\n        // eslint-disable-next-line no-async-promise-executor\n        (h = new Promise(async (f, n) => {\n          // Create script element (done async to potentially wait for nonce)\n          // await (a = m.createElement('script')); // Original Google code had await here, might not be needed\n          a = m.createElement(\"script\"); // Create script tag\n          e.set(\"libraries\", [...r].join(\",\")); // Add accumulated libraries\n          // Add other parameters from the config object 'g'\n          for (k in g)\n            e.set(\n              k.replace(/[A-Z]/g, (t) => \"_\" + t[0].toLowerCase()), // Convert camelCase to snake_case\n              g[k],\n            );\n          e.set(\"callback\", c + \".maps.\" + q); // Set the internal callback function name\n          a.src = `https://maps.${c}apis.com/maps/api/js?` + e; // Construct the API URL\n          d[q] = f; // Assign the promise resolver to the callback name on google.maps\n          // Error handling for script loading failure\n          a.onerror = () =>\n            (h = n(\n              new Error(\n                `${p} could not load. Check your API key and network connection.`,\n              ),\n            )); // Use onerror for load failures\n          // Nonce for Content Security Policy\n          a.nonce = m.querySelector(\"script[nonce]\")?.nonce || \"\";\n          m.head.append(a); // Append the script to the document head\n        }));\n    // Define or reuse the importLibrary function on google.maps\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    d[l]\n      ? console.warn(p + \" only loads once. Ignoring:\", g) // Warn if called again\n      : (d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n))); // The actual importLibrary implementation\n  }\n\n  // --- UI Creation ---\n  _createPACStructure() {\n    const section = document.createElement(\"section\");\n    section.className = this.#options.classes.section;\n\n    // Main container\n    this.#container = document.createElement(\"div\");\n    this.#container.className = this.#options.classes.container;\n    this.#container.setAttribute(\"id\", this.#containerId + \"-div\");\n    section.appendChild(this.#container);\n\n    // Icon\n    const iconContainer = document.createElement(\"div\");\n    iconContainer.className = this.#options.classes.icon_container;\n    this.#container.appendChild(iconContainer);\n    const icon = document.createElement(\"div\");\n    icon.innerHTML = this.#options.classes.icon;\n    iconContainer.appendChild(icon.firstElementChild); // Append the actual SVG element\n\n    // Input field\n    this.#inputElement = document.createElement(\"input\");\n    this.#inputElement.id = this.#containerId + \"-input\"; // Assign ID for label association\n    this.#inputElement.type = \"text\";\n    this.#inputElement.name = \"search\"; // Consider making name configurable\n    this.#inputElement.placeholder = this.#options.placeholder;\n    this.#inputElement.autocomplete = this.#options.autocomplete;\n    this.#inputElement.className = this.#options.classes.input;\n    this.#inputElement.setAttribute(\"role\", \"combobox\");\n    this.#inputElement.setAttribute(\"aria-autocomplete\", \"list\");\n    this.#inputElement.setAttribute(\"aria-expanded\", \"false\"); // Will be updated dynamically\n    this.#inputElement.setAttribute(\"aria-controls\", \"pacSuggestions\"); // Links to the suggestions list\n    this.#inputElement.setAttribute(\"aria-activedescendant\", \"\"); // Will be updated dynamically\n\n    if (this.#options.autofocus) {\n      this.#inputElement.autofocus = true;\n    }\n    if (this.#options.label) {\n      const label = document.createElement(\"label\");\n      label.htmlFor = this.#inputElement.id; // Correctly link label to input by ID\n      label.textContent = this.#options.label;\n      // Add label classes if needed from opts.classes\n      section.prepend(label); // Append label before input or adjust structure\n    }\n    this.#container.appendChild(this.#inputElement);\n\n    // Keyboard hints container\n    const kbdContainer = document.createElement(\"div\");\n    kbdContainer.className = this.#options.classes.kbd_container;\n    this.#kbdEscape = document.createElement(\"kbd\");\n    this.#kbdEscape.className = this.#options.classes.kbd_escape;\n    this.#kbdEscape.textContent = \"Esc\";\n    kbdContainer.appendChild(this.#kbdEscape);\n    this.#kbdUp = document.createElement(\"kbd\");\n    this.#kbdUp.className = this.#options.classes.kbd_up;\n    this.#kbdUp.innerHTML = \"&#8593;\"; // Up arrow HTML entity\n    kbdContainer.appendChild(this.#kbdUp);\n    this.#kbdDown = document.createElement(\"kbd\");\n    this.#kbdDown.className = this.#options.classes.kbd_down;\n    this.#kbdDown.innerHTML = \"&#8595;\"; // Down arrow HTML entity\n    kbdContainer.appendChild(this.#kbdDown);\n    this.#container.appendChild(kbdContainer);\n\n    // Suggestions list (initially hidden)\n    this.#ul = document.createElement(\"ul\");\n    this.#ul.id = \"pacSuggestions\"; // Must match aria-controls\n    this.#ul.className = this.#options.classes.ul;\n    this.#ul.style.display = \"none\";\n    this.#ul.setAttribute(\"role\", \"listbox\");\n    this.#ul.setAttribute(\"aria-labelledby\", this.#inputElement.id); // Link listbox to input for accessibility\n    this.#container.appendChild(this.#ul);\n\n    this.#pacEl.appendChild(section);\n    section.addEventListener(\"keydown\", this._onKeyDown.bind(this)); // Bind 'this'\n  }\n\n  /**\n   * Attaches event listeners to the input element for handling user input.\n   * This includes debounced input handling, focus/blur events, and keyboard navigation.\n   */\n  _attachedEventListeners() {\n    this.#inputElement.addEventListener(\"input\", this.#debouncedMakeAcRequest);\n    // Add focus/blur listeners if needed to manage suggestion visibility\n    this.#inputElement.addEventListener(\"blur\", () => {\n      // Delay hiding suggestions to allow click events on them\n      setTimeout(() => {\n        if (this.#ul && !this.#ul.contains(document.activeElement)) {\n          // Check if focus moved outside suggestions\n          this.#ul.style.display = \"none\";\n          this.#inputElement.setAttribute(\"aria-expanded\", \"false\");\n        }\n      }, 200); // Adjust delay as needed\n    });\n    this.#inputElement.addEventListener(\"focus\", () => {\n      // Potentially show suggestions again if input has value\n      if (this.#inputElement.value && this.#allSuggestions.length > 0) {\n        this.#ul.style.display = \"block\";\n        this.#inputElement.setAttribute(\"aria-expanded\", \"true\");\n      }\n    });\n  }\n\n  _detachEventListeners() {\n    // Remove event listeners, remove elements from DOM\n    if (this.#inputElement) {\n      this.#inputElement.removeEventListener(\n        \"input\",\n        this.#debouncedMakeAcRequest,\n      );\n      // remove other listeners\n    }\n    if (this.#pacEl && this.#container) {\n      this.#pacEl.removeChild(this.#container.parentElement); // remove the whole section\n    }\n  }\n\n  /**\n   * Initializes the core autocomplete functionality after the API is loaded.\n   * Imports necessary libraries and sets up the input event listener.\n   */\n  async _initializeAutocomplete() {\n    try {\n      // Ensure the 'places' library is available via the dynamic loader\n      // eslint-disable-next-line no-undef\n      await google.maps.importLibrary(\"places\");\n      // console.log('Places library imported successfully.'); // For debugging\n\n      // Initial token generation\n      this._refreshToken();\n\n      // Attach the debounced request function to the input element's 'input' event\n      if (this.#inputElement) {\n        this._attachedEventListeners();\n      } else {\n        this.#onErrorCallback(\n          new Error(\"Input element not found during initialization.\"),\n        );\n      }\n    } catch (error) {\n      console.error(\"Error initializing Google Places Autocomplete:\", error);\n      // eslint-disable-next-line no-undef\n      this.#onErrorCallback(\n        new Error(\"Google Maps Places library not available.\"),\n      );\n    }\n  }\n\n  /**\n   * Resets the autocomplete input field, clears suggestions, and optionally refreshes the session token.\n   * @param {boolean} [refresh=false] - Whether to refresh the Google Places session token.\n   */\n  _reset(refresh = false, placeData = null) {\n    this.#currentSuggestion = -1;\n\n    /**\n     * If the input element exists and clear_input is false, set its value to the formatted address\n     * from placeData. Otherwise, clear the input value.\n     * This allows the user to keep the input value if they selected a place,\n     * but still allows clearing it if clear_input is true or placeData is not provided.\n     * @type {HTMLInputElement}\n     * @property {string} value - The value of the input element.\n     * @property {boolean} clear_input - Whether to clear the input value after selection.\n     * @property {Object} placeData - The data of the selected place, containing formattedAddress.\n     */\n    if (\n      this.#inputElement &&\n      this.#options.clear_input == false &&\n      placeData &&\n      placeData.formattedAddress\n    ) {\n      this.#inputElement.value = placeData.formattedAddress; // Set input value to formatted address\n    } else if (this.#inputElement) {\n      this.#inputElement.value = \"\";\n    }\n\n    if (this.#inputElement) {\n      this.#inputElement.setAttribute(\"aria-expanded\", \"false\");\n      this.#inputElement.setAttribute(\"aria-activedescendant\", \"\"); // Clear aria-activedescendant\n      this.#inputElement.blur();\n    }\n\n    this.#allSuggestions = [];\n    this.#currentSuggestion = -1;\n    if (this.#ul) {\n      this.#ul.innerHTML = \"\"; // Clear existing suggestions\n      this.#ul.style.display = \"none\";\n    }\n    if (refresh) {\n      this._refreshToken();\n    }\n  }\n  /**\n   * Removes the 'current' highlighting classes from all suggestion list items (li) and their links (a).\n   */\n  _resetLiClasses() {\n    if (!this.#ul) return;\n    Array.from(this.#ul.children).forEach((li) => {\n      this.#options.classes.li_current\n        .split(\" \")\n        .forEach((cl) => li.classList.remove(cl));\n      const link = li.querySelector(\"button\");\n      if (link) {\n        this.#options.classes.li_button_current\n          .split(\" \")\n          .forEach((cl) => link.classList.remove(cl));\n      }\n    });\n  }\n\n  /**\n   * Handles keyboard events (ArrowDown, ArrowUp, Enter, Escape) for navigating\n   * and selecting suggestions or closing the list.\n   * @param {KeyboardEvent} e - The keyboard event object.\n   */\n  _onKeyDown(e) {\n    this._resetLiClasses(); // Reset classes on any key press within the suggestions\n\n    if (e.key === \"Escape\") {\n      e.preventDefault();\n      // Visual feedback for key press\n      this.#options.classes.kbd_active\n        .split(\" \")\n        .forEach((cl) => this.#kbdEscape?.classList.add(cl));\n      setTimeout(\n        () =>\n          this.#options.classes.kbd_active\n            .split(\" \")\n            .forEach((cl) => this.#kbdEscape?.classList.remove(cl)),\n        300,\n      );\n\n      this._reset(true); // Reset search input and results, refresh token\n    }\n\n    if (\n      !this.#allSuggestions.length ||\n      !this.#ul ||\n      this.#ul.style.display === \"none\"\n    )\n      return;\n\n    if (e.key === \"ArrowDown\") {\n      e.preventDefault(); // Prevent cursor movement in input\n      this.#currentSuggestion = Math.min(\n        this.#currentSuggestion + 1,\n        this.#allSuggestions.length - 1,\n      );\n      if (this.#currentSuggestion < 0) this.#currentSuggestion = 0; // Handle case where it was -1\n\n      const currentLi = this.#ul.children.item(this.#currentSuggestion);\n      if (currentLi) {\n        const currentButton = currentLi.querySelector(\"button\");\n        this.#options.classes.li_current\n          .split(\" \")\n          .forEach((cl) => currentLi.classList.add(cl));\n        if (currentButton) {\n          this.#options.classes.li_button_current\n            .split(\" \")\n            .forEach((cl) => currentButton.classList.add(cl));\n        }\n        currentLi.scrollIntoView({ block: \"nearest\" }); // Ensure visible\n        this.#inputElement.setAttribute(\"aria-activedescendant\", currentLi.id); // Update aria-activedescendant\n      }\n\n      // Visual feedback for key press\n      this.#options.classes.kbd_active\n        .split(\" \")\n        .forEach((cl) => this.#kbdDown?.classList.add(cl));\n      setTimeout(\n        () =>\n          this.#options.classes.kbd_active\n            .split(\" \")\n            .forEach((cl) => this.#kbdDown?.classList.remove(cl)),\n        300,\n      );\n    } else if (e.key === \"ArrowUp\") {\n      e.preventDefault(); // Prevent cursor movement in input\n      this.#currentSuggestion = Math.max(this.#currentSuggestion - 1, 0); // Stay at 0 if already there\n\n      const currentLi = this.#ul.children.item(this.#currentSuggestion);\n      if (currentLi) {\n        const currentButton = currentLi.querySelector(\"button\");\n        this.#options.classes.li_current\n          .split(\" \")\n          .forEach((cl) => currentLi.classList.add(cl));\n        if (currentButton) {\n          this.#options.classes.li_button_current\n            .split(\" \")\n            .forEach((cl) => currentButton.classList.add(cl));\n        }\n        currentLi.scrollIntoView({ block: \"nearest\" }); // Ensure visible\n      }\n\n      // Visual feedback for key press\n      this.#options.classes.kbd_active\n        .split(\" \")\n        .forEach((cl) => this.#kbdUp?.classList.add(cl));\n      setTimeout(\n        () =>\n          this.#options.classes.kbd_active\n            .split(\" \")\n            .forEach((cl) => this.#kbdUp?.classList.remove(cl)),\n        300,\n      );\n    } else if (e.key === \"Enter\") {\n      e.preventDefault(); // Prevent form submission if applicable\n      if (\n        this.#currentSuggestion >= 0 &&\n        this.#currentSuggestion < this.#allSuggestions.length\n      ) {\n        this._onPlaceSelected(\n          this.#allSuggestions[this.#currentSuggestion].place,\n        );\n        // Reset is handled within onPlaceSelected via reset(true)\n      }\n    }\n  }\n\n  // Helper function to find a specific address component\n  _getAddressComponent(response, type) {\n    return (\n      response.addressComponents?.find((c) => c.types.includes(type))\n        ?.longText || \"\"\n    );\n  }\n\n  /**\n   * Creates a button element for a suggestion item.\n   * @returns {HTMLButtonElement} The created button element.\n   */\n  _createButtonElement(index) {\n    const button = document.createElement(\"button\");\n    button.tabIndex = index + 1;\n    button.className = this.#options.classes.li_button; // block w-full flex justify-between\n    return button;\n  }\n\n  /**\n   * Creates a div container for suggestion item.\n   * @returns {HTMLDivElement} The created div container element.\n   */\n  _createDivElement(className) {\n    // create div elements pac-li-div-container\n    const divContainer = document.createElement(\"div\");\n    if (className) {\n      divContainer.className = className;\n    }\n    return divContainer;\n  }\n\n  /**\n   * Creates an SVG element representing a map pin icon.\n   * @returns {SVGSVGElement} The created SVG element.\n   */\n  _createMapPinIconElement() {\n    const svgIcon = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"svg\",\n    );\n    svgIcon.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n    svgIcon.setAttribute(\"width\", \"24\");\n    svgIcon.setAttribute(\"height\", \"24\");\n    svgIcon.setAttribute(\"viewBox\", \"0 0 24 24\");\n    svgIcon.setAttribute(\"fill\", \"none\");\n    svgIcon.setAttribute(\"stroke\", \"currentColor\");\n    svgIcon.setAttribute(\"stroke-width\", \"2\");\n    svgIcon.setAttribute(\"stroke-linecap\", \"round\");\n    svgIcon.setAttribute(\"stroke-linejoin\", \"round\");\n    svgIcon.setAttribute(\"class\", this.#options.classes.map_icon_svg);\n    // insert map pin icon path\n    svgIcon.innerHTML = this.#options.classes.map_pin_icon;\n    return svgIcon;\n  }\n\n  /**\n   * Creates a paragraph (P) element with an optional class name.\n   * @param {string} className\n   * @returns {HTMLParagraphElement}\n   */\n  _createPElement(className) {\n    const p = document.createElement(\"p\");\n    if (className) {\n      p.className = className;\n    }\n    return p;\n  }\n  /**\n   * Creates an array of list item (LI) elements for the suggestions dropdown.\n   * Each LI contains a link (A) with the place prediction details and distance.\n   * Handles highlighting the matched parts of the suggestion text.\n   * @param {Array<google.maps.places.AutocompleteSuggestion>} suggestions - Array of suggestion objects from the API.\n   * @returns {Array<HTMLLIElement>} An array of LI elements to be added to the suggestions UL.\n   */\n  _createSuggestionElements(suggestions) {\n    this.#allSuggestions = []; // Reset before populating\n    // Map suggestions to LI elements\n    return suggestions.map(async (suggestion, index) => {\n      // Fetch place details for each suggestion\n      let place = suggestion.placePrediction.toPlace();\n\n      const li = document.createElement(\"li\");\n      li.id = `option-${index + 1}`;\n      li.className = this.#options.classes.li;\n\n      // create button element\n      const button = this._createButtonElement(index);\n      // Add click event listener to handle selection\n      button.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        this._onPlaceSelected(suggestion.placePrediction.toPlace());\n      });\n\n      // create div elements pac-li-div-container\n      const divContainer = this._createDivElement(\n        this.#options.classes.li_div_container,\n      );\n\n      // create li div one element - place name\n      const liDivOne = this._createDivElement(this.#options.classes.li_div_one);\n      const liDivTwo = this._createDivElement(this.#options.classes.li_div_two);\n      // create map pin icon element\n      const mapPinIcon = this._createMapPinIconElement();\n      // append map pin icon to liDivOne\n      liDivOne.appendChild(mapPinIcon);\n\n      // create div p container\n      const divPContainer = this._createDivElement(\n        this.#options.classes.li_div_p_container,\n      );\n      // append div p container to liDivOne\n      liDivOne.appendChild(divPContainer);\n\n      // create p element - place name\n      const pOne = this._createPElement(this.#options.classes.li_div_one_p);\n      // create p element - secondary text\n      const pTwo = this._createPElement(\n        this.#options.classes.li_div_one_p_secondaryText,\n      );\n      // create p element - distance\n      const pThree = this._createPElement(this.#options.classes.li_div_two_p);\n      pThree.textContent = this._formatDistance(\n        suggestion.placePrediction.distanceMeters,\n        this.#options.distance_units ?? \"km\",\n      );\n      // append p element to div p container\n      divPContainer.appendChild(pOne);\n      divPContainer.appendChild(pTwo);\n\n      // Add place type display if enabled, otherwise show distance\n      if (\n        this.#options.show_place_type &&\n        Array.isArray(suggestion.placePrediction.types) &&\n        suggestion.placePrediction.types.length > 0\n      ) {\n        const placeTypeContainer = this._createDivElement(\n          this.#options.classes.li_div_two_p_place_type,\n        );\n\n        const placeTypeIcon = this._createPElement(\n          this.#options.classes.li_div_two_p_place_type_icon,\n        );\n\n        const placeTypeLabel = this._createPElement(\n          this.#options.classes.li_div_two_p_place_type_label,\n        );\n\n        // Look through the array until we find a type we actually recognize\n        const matchedType = suggestion.placePrediction.types.find(\n          (type) =>\n            typeof type === \"string\" && type in this.#ITINERARY_CATEGORIES,\n        );\n\n        placeTypeLabel.textContent = matchedType\n          ? this.#ITINERARY_CATEGORIES[matchedType]\n          : \"Default\";\n\n        placeTypeIcon.innerHTML =\n          this.#ITINERARY_SVG_ICONS[placeTypeLabel.textContent] ||\n          this.#ITINERARY_SVG_ICONS[\"Default\"];\n\n        placeTypeContainer.appendChild(placeTypeIcon);\n        placeTypeContainer.appendChild(placeTypeLabel);\n        liDivTwo.appendChild(placeTypeContainer);\n      } else {\n        liDivTwo.appendChild(pThree);\n      }\n\n      // append liDivOne to divContainer\n      divContainer.appendChild(liDivOne);\n      divContainer.appendChild(liDivTwo);\n      // append divContainer to button\n      button.appendChild(divContainer);\n      // append button to li\n      li.appendChild(button);\n\n      // get prediction text\n      const predictionText = suggestion.placePrediction.mainText;\n      const originalText = predictionText.text;\n      // Array of objects with startOffset, endOffset\n      const matches = predictionText.matches;\n\n      //Highlighting Logic\n      let lastIndex = 0;\n\n      // Sort matches just in case they aren't ordered (though they usually are)\n      matches.sort((a, b) => a.startOffset - b.startOffset);\n\n      // 1. Create the outer span\n      const outerSpan = document.createElement(\"span\");\n\n      // 2. Create the inner span for the bold part\n      const innerSpan = document.createElement(\"span\");\n      innerSpan.classList = this.#options.classes.highlight ?? \"font-bold\"; // Use the highlight class from options\n\n      for (const match of matches) {\n        // Append text before the current match\n        outerSpan.textContent += originalText.substring(\n          lastIndex,\n          match.startOffset,\n        );\n\n        // Append the highlighted match segment\n        if (match.startOffset > 0) {\n          // check previous charter is space\n          const prevChar = originalText.charAt(match.startOffset - 1);\n          if (prevChar == \" \") {\n            innerSpan.textContent += \" \";\n          }\n        }\n        innerSpan.textContent += originalText.substring(\n          match.startOffset,\n          match.endOffset,\n        );\n\n        // Update the last index processed\n        lastIndex = match.endOffset;\n      }\n\n      // 3. Create a text node for the remaining text\n      const remainingText = document.createTextNode(\n        originalText.substring(lastIndex),\n      );\n\n      // 4. Append the inner span and the text node to the outer span\n      outerSpan.appendChild(innerSpan);\n      outerSpan.appendChild(remainingText);\n\n      // 5. Append the outer span to the paragraph element\n      pOne.appendChild(outerSpan);\n\n      // set secondary text if available\n      const secondaryText =\n        suggestion.placePrediction?.secondaryText?.text ?? \"\";\n\n      if (secondaryText) {\n        pTwo.textContent = secondaryText;\n      }\n\n      this.#allSuggestions.push({\n        id: index + 1,\n        place: place,\n        mainText: suggestion.placePrediction.mainText.text,\n        secondaryText: secondaryText,\n        description: suggestion.placePrediction.toString(),\n      });\n\n      li.appendChild(button);\n      return li;\n    });\n  }\n\n  /**\n   * Handles the selection of a place. Fetches required fields\n   * (displayName, formattedAddress, addressComponents) and calls the\n   * user-defined `onPacData` callback.\n   * @param {google.maps.places.Place} place - The selected Place object.\n   */\n  async _onPlaceSelected(place) {\n    let data = null;\n    try {\n      // Fetch necessary details for the selected place\n      await place.fetchFields({\n        fields: this.#fetchFields, //[\"displayName\", \"formattedAddress\", \"addressComponents\"], // Add more fields as needed\n      });\n      // Call the user-provided callback with the place data\n      // Handle response_type option\n      if (this.#options.response_type === \"place\") {\n        data = place; // Return the Place instance\n        this.#onDataCallback(place);\n      } else {\n        // eslint-disable-next-line no-undef\n        data = place.toJSON(); // Convert to plain JSON object (default)\n        this.#onDataCallback(data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching place details:\", error);\n      // eslint-disable-next-line no-undef\n      this.#onErrorCallback(error);\n    } finally {\n      // Reset the input and suggestions regardless of success/error\n      this._reset(true, data); // Refresh token after selection\n    }\n  }\n\n  /**\n   * Creates a new Google Places Autocomplete Session Token.\n   * This should be called before starting a new series of autocomplete requests.\n   */\n  _refreshToken() {\n    try {\n      // eslint-disable-next-line no-undef\n      this.#request.sessionToken =\n        new google.maps.places.AutocompleteSessionToken();\n    } catch (error) {\n      console.error(\"Error creating session token:\", error);\n      // eslint-disable-next-line no-undef\n      this.#onErrorCallback(error);\n    }\n  }\n\n  /**\n   * Sets the fields to be fetched for the selected place.\n   * This allows you to specify which details you want to retrieve\n   * when a place is selected, such as displayName, formattedAddress,\n   * addressComponents, etc.\n   * @param {Array<string>} fields - Array of field names to fetch.\n   */\n  setFetchFields(fields) {\n    this._setFetchFields(fields);\n  }\n  /**\n   * Gets the current fields that will be fetched for the selected place.\n   * This is useful for understanding what details will be available\n   * when a place is selected, such as displayName, formattedAddress,\n   * addressComponents, etc.\n   * @returns {Array<string>} The current fetch fields.\n   */\n  getFetchFields() {\n    return this.#fetchFields;\n  }\n\n  /**\n   * Sets the request parameters for the Places Autocomplete instance.\n   * This method allows you to update the request parameters dynamically,\n   * such as the input value, region codes, language, etc.\n   * It merges the provided parameters with the default request parameters,\n   * allowing you to override specific values while keeping the defaults intact.\n   * This is useful for updating the search criteria without needing to recreate the instance.\n   * @param {*} params\n   */\n  setRequestParams(params) {\n    if (\n      typeof params === \"object\" &&\n      !Array.isArray(params) &&\n      params !== null\n    ) {\n      // if params.input is provided, set it to the input element\n      if (params.input && typeof params.input === \"string\") {\n        this.#inputElement.value = params.input; // Set input value if provided\n      }\n      // Merge provided params with default request parameters\n      // This allows overriding specific request parameters while keeping defaults\n      this.#request = {\n        ...this.#defaultRequestParams,\n        ...params,\n      };\n    }\n  }\n\n  /**\n   * Returns the current request parameters used by the Places Autocomplete instance.\n   * This includes the input value, included region codes, language, and other settings.\n   * It is useful for debugging or when you need to know the current search criteria.\n   * @returns {Object} The current request parameters.\n   */\n  getRequestParams() {\n    return this.#request;\n  }\n\n  /**\n   * Sets the options for the Places Autocomplete instance.\n   * This method allows you to change the appearance and behavior of the autocomplete widget,\n   * such as classes, placeholder text, debounce time, etc.\n   * It merges the provided options with the default options, allowing you to override specific values\n   * while keeping the defaults intact.\n   * This is useful for updating the widget's configuration without needing to recreate the instance.\n   * @param {*} options\n   */\n  setOptions(options) {\n    if (\n      typeof options === \"object\" &&\n      !Array.isArray(options) &&\n      options !== null\n    ) {\n      this._detachEventListeners(); // Detach event listeners\n\n      // // Ensure classes are deeply merged if user provides partial classes\n      const tmpClasses = options.classes || {};\n      delete options.classes; // Remove classes from options to avoid overwriting\n\n      // Merge provided options with default options\n      // This allows overriding specific options while keeping defaults\n      this.#options = {\n        ...this.#defaultOptions,\n        ...options,\n      };\n\n      // Merge classes with defaults\n      // This allows overriding specific classes while keeping defaults\n      if (\n        tmpClasses &&\n        typeof tmpClasses === \"object\" &&\n        Object.keys(tmpClasses).length > 0\n      ) {\n        this.#options.classes = {\n          ...this.#defaultClasses,\n          ...tmpClasses,\n        };\n      } else {\n        this.#options.classes = { ...this.#defaultClasses }; // Use defaults if no classes provided\n      }\n\n      // Ensure distance and show_place_type are mutually exclusive\n      if (this.#options.show_place_type && this.#options.distance) {\n        this.#options.distance = false; // Disable distance when show_place_type is enabled\n      }\n\n      this._initialiseDebouncedRequest(); // Reinitialize the debounced request function\n      this._createPACStructure(); // Recreate the structure with new options\n      // Reattach the input event listener to the input element\n      // This is necessary to ensure the new input element is ready for events\n      if (this.#inputElement) {\n        this._attachedEventListeners();\n      } // Reinitialize the autocomplete functionality\n    }\n  }\n\n  /**\n   * Gets the current options used by the Places Autocomplete instance.\n   * @returns {Object} The current options.\n   */\n  getOptions() {\n    /**\n     * Returns the current options used by the Places Autocomplete instance.\n     * This includes classes, placeholder text, debounce time, and other settings.\n     * It is useful for debugging or when you need to know the current configuration of the widget.\n     * @returns {Object} The current options.\n     */\n    return this.#options;\n  }\n\n  /**\n   * Sets the input value by reverse geocoding coordinates.\n   * Performs reverse geocoding to convert lat/lng to a place, then triggers onResponse.\n   * Requires the Geocoding API to be enabled in your Google Cloud Console project.\n   * @param {number} latitude - Latitude coordinate\n   * @param {number} longitude - Longitude coordinate\n   * @returns {Promise<void>}\n   */\n  async setInputValue(latitude, longitude) {\n    try {\n      // Import the geocoding library\n      const { Geocoder } = await google.maps.importLibrary(\"geocoding\");\n      const geocoder = new Geocoder();\n\n      // Perform reverse geocoding\n      const response = await geocoder.geocode({\n        location: { lat: latitude, lng: longitude },\n      });\n\n      if (response.results && response.results.length > 0) {\n        const placeId = response.results[0].place_id;\n        const place = new google.maps.places.Place({ id: placeId });\n\n        // Fetch the configured fields\n        await place.fetchFields({ fields: this.#fetchFields });\n\n        // Update input field if clear_input is false\n        if (!this.#options.clear_input && place.formattedAddress) {\n          this.#inputElement.value = place.formattedAddress;\n        }\n\n        // Trigger the callback with appropriate response type\n        if (this.#options.response_type === \"place\") {\n          this.#onDataCallback(place);\n        } else {\n          this.#onDataCallback(place.toJSON());\n        }\n      } else {\n        throw new Error(\"No results found for the provided coordinates\");\n      }\n    } catch (error) {\n      console.error(\"Error in setInputValue:\", error);\n      this.#onErrorCallback(error);\n    }\n  }\n\n  /**\n   * Clears the autocomplete input field and suggestions list.\n   * This method resets the state of the autocomplete widget,\n   * allowing the user to start a new search without any previous input or suggestions.\n   * It also refreshes the Google Places session token to ensure a new session.\n   * @returns {void}\n   */\n  clear() {\n    this._reset(true);\n  }\n\n  /**\n   * Sets focus on the autocomplete input field.\n   * This method allows programmatic control of the input focus,\n   * useful for improving user experience and accessibility.\n   * @returns {void}\n   */\n  focus() {\n    if (this.#inputElement) {\n      this.#inputElement.focus();\n    }\n  }\n\n  /**\n   * Destroys the PacAutocomplete instance.\n   * Removes event listeners, clears the DOM, and nullifies properties.\n   * This method should be called when the autocomplete widget is no longer needed.\n   * It ensures that all resources are cleaned up to prevent memory leaks.\n   * @returns {void}\n   */\n  destroy() {\n    // Remove event listeners, remove elements from DOM\n    this._detachEventListeners(); // Detach event listeners\n    // Nullify properties\n    this.#containerId = null;\n    this.#pacEl = null;\n    this.#googleMapsApiKey = null;\n    this.#googleMapsApiVersion = null;\n    this.#options = null;\n    this.#request = null;\n    this.#inputElement = null;\n    this.#container = null;\n    this.#ul = null;\n    this.#kbdEscape = null;\n    this.#kbdUp = null;\n    this.#kbdDown = null;\n    this.#allSuggestions = null;\n    this.#currentSuggestion = -1;\n    this.#onDataCallback = null;\n    this.#onErrorCallback = null;\n    this.#debouncedMakeAcRequest = null;\n  }\n}\n"],"names":["PlacesAutocomplete","#containerId","#pacEl","#googleMapsApiKey","#googleMapsApiVersion","#options","#request","#inputElement","#container","#ul","#kbdEscape","#kbdUp","#kbdDown","#allSuggestions","#currentSuggestion","#onDataCallback","#onErrorCallback","#debouncedMakeAcRequest","#defaultOptions","#defaultClasses","#defaultRequestParams","#fetchFields","#defaultFetchFields","#ITINERARY_CATEGORIES","#ITINERARY_SVG_ICONS","config","place","error","suggestions","suggestionElements","fields","func","wait","timeout","args","later","distance","units","value","unitLabel","g","h","a","k","p","c","q","m","b","d","r","e","u","f","n","t","section","iconContainer","icon","label","kbdContainer","refresh","placeData","li","cl","link","currentLi","currentButton","response","type","index","button","className","divContainer","svgIcon","suggestion","liDivOne","liDivTwo","mapPinIcon","divPContainer","pOne","pTwo","pThree","placeTypeContainer","placeTypeIcon","placeTypeLabel","matchedType","predictionText","originalText","matches","lastIndex","outerSpan","innerSpan","match","remainingText","secondaryText","data","params","options","tmpClasses","latitude","longitude","Geocoder","placeId"],"mappings":"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"}