(function(_,v){typeof exports=="object"&&typeof module<"u"?v(exports):typeof define=="function"&&define.amd?define(["exports"],v):(_=typeof globalThis<"u"?globalThis:_||self,v(_.PlacesAutocomplete={}))})(this,(function(_){"use strict";class v{#u;#d;#m;#w;#e;#o;#t;#n;#i;#r;#c;#h;#a=[];#s=-1;#p;#l;#_;#y={autofocus:!1,autocomplete:"off",placeholder:"Start typing your address ...",distance:!1,distance_units:"km",label:"",debounce:100,clear_input:!1,debug:!1,response_type:"json",show_place_type:!1};#g={section:"",container:"pac-container",icon_container:"pac-icon-container",icon:'<svg xmlns="http://www.w3.org/2000/svg" class="pac-w-5 pac-h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></svg>',input:"pac-input",kbd_container:"pac-kbd-container",kbd_escape:"pac-kbd-escape",kbd_up:"pac-kbd-up",kbd_down:"pac-kbd-down",kbd_active:"pac-kbd-active",ul:"pac-ul",li:"pac-li",li_current:"pac-li-current",li_button:"pac-li-button",li_button_current:"pac-li-button-current",li_div_container:"pac-li-div-container",li_div_p_container:"pac-li-div-p-container",li_div_one:"pac-li-div-one",li_div_one_p:"pac-li-div-one-p",map_icon_svg:"pac-map-icon-svg",map_pin_icon:'<path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><circle cx="12" cy="10" r="3"/>',li_div_one_p_secondaryText:"pac-li-div-one-p-secondaryText",li_div_two:"pac-li-div-two",li_div_two_p:"pac-li-div-two-p",li_div_two_p_place_type:"pac-li-div-two-p-place_type",li_div_two_p_place_type_icon:"pac-li-div-two-p-place_type-icon",li_div_two_p_place_type_label:"pac-li-div-two-p-place_type-label",highlight:"pac-highlight"};#f={input:""};#v=["formattedAddress","addressComponents"];#C=["formattedAddress","addressComponents"];#k={car_rental:"Automotive",car_dealer:"Automotive",gas_station:"Automotive",electric_vehicle_charging_station:"Automotive",parking:"Automotive",airport:"Airport",bus_station:"Transport",train_station:"Train Station",subway_station:"Subway Station",taxi_stand:"Transport",ferry_terminal:"Transport",restaurant:"Food and Drink",cafe:"Food and Drink",coffee_shop:"Food and Drink",bar:"Food and Drink",pub:"Food and Drink",night_club:"Food and Drink",bakery:"Food and Drink",fast_food_restaurant:"Food and Drink",ice_cream_shop:"Food and Drink",pizza_restaurant:"Food and Drink",steak_house:"Food and Drink",sushi_restaurant:"Food and Drink",hotel:"Lodging",hostel:"Lodging",motel:"Lodging",resort_hotel:"Lodging",bed_and_breakfast:"Lodging",campground:"Lodging",rv_park:"Lodging",lodging:"Lodging",cottage:"Lodging",inn:"Lodging",guest_house:"Lodging",tourist_attraction:"Sightseeing",museum:"Sightseeing",art_gallery:"Sightseeing",cultural_landmark:"Sightseeing",historical_landmark:"Sightseeing",monument:"Sightseeing",performing_arts_theater:"Sightseeing",aquarium:"Sightseeing",zoo:"Sightseeing",visitor_center:"Sightseeing",town_square:"Sightseeing",landmark:"Sightseeing",place_of_worship:"Sightseeing",park:"Recreation",national_park:"Recreation",state_park:"Recreation",beach:"Recreation",hiking_area:"Recreation",amusement_park:"Recreation",water_park:"Recreation",botanical_garden:"Recreation",golf_course:"Recreation",gym:"Recreation",natural_feature:"Recreation",shopping_mall:"Shopping",supermarket:"Shopping",grocery_store:"Shopping",clothing_store:"Shopping",electronics_store:"Shopping",souvenir_shop:"Shopping",gift_shop:"Shopping",duty_free_store:"Shopping",hospital:"Health",pharmacy:"Health",atm:"Finance",bank:"Finance",post_office:"Services",police:"Services",neighborhood:"Geographical",sublocality:"Geographical",route:"Navigation",street_address:"Navigation",intersection:"Navigation",locality:"City",administrative_area_level_4:"City",country:"Country",administrative_area_level_1:"City",administrative_area_level_2:"City",administrative_area_level_3:"City",administrative_area_level_5:"City",sublocality_level_1:"Neighborhood",sublocality_level_2:"Neighborhood",sublocality_level_3:"Neighborhood",sublocality_level_4:"Neighborhood",sublocality_level_5:"Neighborhood",default:"Default"};#b={Automotive:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>',Transport:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"/></svg>',"Food and Drink":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>',Lodging:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>',Sightseeing:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-binoculars-icon lucide-binoculars"><path d="M10 10h4"/><path d="M19 7V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3"/><path d="M20 21a2 2 0 0 0 2-2v-3.851c0-1.39-2-2.962-2-4.829V8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2z"/><path d="M 22 16 L 2 16"/><path d="M4 21a2 2 0 0 1-2-2v-3.851c0-1.39 2-2.962 2-4.829V8a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2z"/><path d="M9 7V4a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v3"/></svg>',Recreation:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-kayak-icon lucide-kayak"><path d="M18 17a1 1 0 0 0-1 1v1a2 2 0 1 0 2-2z"/><path d="M20.97 3.61a.45.45 0 0 0-.58-.58C10.2 6.6 6.6 10.2 3.03 20.39a.45.45 0 0 0 .58.58C13.8 17.4 17.4 13.8 20.97 3.61"/><path d="m6.707 6.707 10.586 10.586"/><path d="M7 5a2 2 0 1 0-2 2h1a1 1 0 0 0 1-1z"/></svg>',Shopping:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>',Health:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 7v4"/><path d="M14 21v-3a2 2 0 0 0-4 0v3"/><path d="M14 9h-4"/><path d="M18 11h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2"/><path d="M18 21V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16"/></svg>',Finance:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" y1="10" x2="22" y2="10"/></svg>',Geographical:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m20 20-6-10.6c-.4-.7-1.5-.7-1.9 0L6 20"/><path d="M7 16h10"/><path d="M12 4a8 8 0 0 1 8 8v2a2 2 0 0 1-2 2h-1"/><path d="M7 16H6a2 2 0 0 1-2-2v-2a8 8 0 0 1 8-8"/></svg>',Navigation:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-navigation-icon lucide-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"/></svg>',City:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building2-icon lucide-building-2"><path d="M10 12h4"/><path d="M10 8h4"/><path d="M14 21v-3a2 2 0 0 0-4 0v3"/><path d="M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2"/><path d="M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16"/></svg>',District:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-land-plot-icon lucide-land-plot"><path d="m12 8 6-3-6-3v10"/><path d="m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12"/><path d="m6.49 12.85 11.02 6.3"/><path d="M17.51 12.85 6.5 19.15"/></svg>',Airport:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plane-icon lucide-plane"><path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"/></svg>',"Subway Station":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-subway-icon lucide-subway"><path d="M12 22a10 10 0 0 0 10-10V8l-5-5H7L2 8v4a10 10 0 0 0 10 10Z"/><path d="M12 22V8"/><path d="M7 13h10"/><path d="M7 17h10"/></svg>',"Train Station":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  style="display:inline-block"; viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-train-icon lucide-train"><path d="M2 10h20"/><path d="M2 10a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5Z"/><circle cx="7" cy="15" r="2"/><circle cx="17" cy="15" r="2"/></svg>',Default:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="display:inline-block";  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>'};constructor(e){if(!e||!e.containerId||!e.googleMapsApiKey)throw new Error("PacAutocomplete: Missing required configuration (containerId, googleMapsApiKey).");if(this.#u=e.containerId,this.#d=document.getElementById(e.containerId),!this.#d)throw new Error(`PacAutocomplete: Container element with ID "${e.containerId}" not found.`);this.#m=e.googleMapsApiKey,this.#w=e.googleMapsApiVersion||"weekly",this.#e={...this.#y,...e.options},e.options&&e.options.classes?this.#e.classes={...this.#g,...e.options.classes}:this.#e.classes=this.#g,this.#e.show_place_type&&this.#e.distance&&(this.#e.distance=!1),this.#e.debug&&(console.log("___debug constructor options:"),console.log(this.#e)),e.fetchFields&&Array.isArray(e.fetchFields)&&this._setFetchFields(e.fetchFields),this.#p=e.onResponse||(t=>{console.info("---------Default onResponse not provided---------"),console.info("Selected Place:",JSON.stringify(t,null,2))}),this.#l=e.onError||(t=>{console.error("---------Default onError not provided---------"),console.error("PAC Error:",t)}),e.requestParams&&Object.keys(e.requestParams).length>0?this.#o={...this.#f,...e.requestParams}:this.#o={...this.#f},this.#e.debug&&console.log("___debug constructor requestParams:",this.#o),this._initialiseDebouncedRequest(),this._init()}async _init(){try{(typeof google>"u"||!google.maps)&&await this._loadGoogleMapsApi({key:this.#m,v:this.#w}),this._createPACStructure(),await this._initializeAutocomplete()}catch(e){this.#l(e)}}_initialiseDebouncedRequest(){this.#_=this._debounce(async()=>{if(!this.#t||!this.#t.value){this._reset(),this.#t&&this.#t.setAttribute("aria-expanded","false");return}this.#o.input=this.#t.value;try{const{suggestions:e}=await google.maps.places.AutocompleteSuggestion.fetchAutocompleteSuggestions(this.#o);if(e&&e.length>0){const t=await Promise.all(this._createSuggestionElements(e));this.#i.replaceChildren(...t),this.#i.style.display="block",this.#t.setAttribute("aria-expanded","true")}else this._reset(),this.#t.setAttribute("aria-expanded","false")}catch(e){this.#l(e),this._reset()}},this.#e.debounce)}_setFetchFields(e){Array.isArray(e)&&e.length>0&&(this.#v=[...new Set([...this.#C,...e])].filter(t=>t))}_debounce(e,t){let i=null;return function(...n){const a=()=>{i=null,e(...n)};i!==null&&clearTimeout(i),i=setTimeout(a,t??100)}}_formatDistance(e,t){if(typeof e!="number"||!this.#e.distance||this.#e.show_place_type)return null;let i,s;return t==="km"?(i=(e/1e3).toFixed(2),s="km"):(i=(e/1609.34).toFixed(2),s="miles"),i=i.replace(/\.00$/,""),`${i} ${s}`}async _loadGoogleMapsApi(e){var t,i,s,n="The Google Maps JavaScript API",a="google",l="importLibrary",g="__ib__",h=document,d=window;d=d[a]||(d[a]={});var r=d.maps||(d.maps={}),m=new Set,p=new URLSearchParams,f=()=>t||(t=new Promise(async(u,c)=>{i=h.createElement("script"),p.set("libraries",[...m].join(","));for(s in e)p.set(s.replace(/[A-Z]/g,y=>"_"+y[0].toLowerCase()),e[s]);p.set("callback",a+".maps."+g),i.src=`https://maps.${a}apis.com/maps/api/js?`+p,r[g]=u,i.onerror=()=>t=c(new Error(`${n} could not load. Check your API key and network connection.`)),i.nonce=h.querySelector("script[nonce]")?.nonce||"",h.head.append(i)}));r[l]?console.warn(n+" only loads once. Ignoring:",e):r[l]=(u,...c)=>m.add(u)&&f().then(()=>r[l](u,...c))}_createPACStructure(){const e=document.createElement("section");e.className=this.#e.classes.section,this.#n=document.createElement("div"),this.#n.className=this.#e.classes.container,this.#n.setAttribute("id",this.#u+"-div"),e.appendChild(this.#n);const t=document.createElement("div");t.className=this.#e.classes.icon_container,this.#n.appendChild(t);const i=document.createElement("div");if(i.innerHTML=this.#e.classes.icon,t.appendChild(i.firstElementChild),this.#t=document.createElement("input"),this.#t.id=this.#u+"-input",this.#t.type="text",this.#t.name="search",this.#t.placeholder=this.#e.placeholder,this.#t.autocomplete=this.#e.autocomplete,this.#t.className=this.#e.classes.input,this.#t.setAttribute("role","combobox"),this.#t.setAttribute("aria-autocomplete","list"),this.#t.setAttribute("aria-expanded","false"),this.#t.setAttribute("aria-controls","pacSuggestions"),this.#t.setAttribute("aria-activedescendant",""),this.#e.autofocus&&(this.#t.autofocus=!0),this.#e.label){const n=document.createElement("label");n.htmlFor=this.#t.id,n.textContent=this.#e.label,e.prepend(n)}this.#n.appendChild(this.#t);const s=document.createElement("div");s.className=this.#e.classes.kbd_container,this.#r=document.createElement("kbd"),this.#r.className=this.#e.classes.kbd_escape,this.#r.textContent="Esc",s.appendChild(this.#r),this.#c=document.createElement("kbd"),this.#c.className=this.#e.classes.kbd_up,this.#c.innerHTML="&#8593;",s.appendChild(this.#c),this.#h=document.createElement("kbd"),this.#h.className=this.#e.classes.kbd_down,this.#h.innerHTML="&#8595;",s.appendChild(this.#h),this.#n.appendChild(s),this.#i=document.createElement("ul"),this.#i.id="pacSuggestions",this.#i.className=this.#e.classes.ul,this.#i.style.display="none",this.#i.setAttribute("role","listbox"),this.#i.setAttribute("aria-labelledby",this.#t.id),this.#n.appendChild(this.#i),this.#d.appendChild(e),e.addEventListener("keydown",this._onKeyDown.bind(this))}_attachedEventListeners(){this.#t.addEventListener("input",this.#_),this.#t.addEventListener("blur",()=>{setTimeout(()=>{this.#i&&!this.#i.contains(document.activeElement)&&(this.#i.style.display="none",this.#t.setAttribute("aria-expanded","false"))},200)}),this.#t.addEventListener("focus",()=>{this.#t.value&&this.#a.length>0&&(this.#i.style.display="block",this.#t.setAttribute("aria-expanded","true"))})}_detachEventListeners(){this.#t&&this.#t.removeEventListener("input",this.#_),this.#d&&this.#n&&this.#d.removeChild(this.#n.parentElement)}async _initializeAutocomplete(){try{await google.maps.importLibrary("places"),this._refreshToken(),this.#t?this._attachedEventListeners():this.#l(new Error("Input element not found during initialization."))}catch(e){console.error("Error initializing Google Places Autocomplete:",e),this.#l(new Error("Google Maps Places library not available."))}}_reset(e=!1,t=null){this.#s=-1,this.#t&&this.#e.clear_input==!1&&t&&t.formattedAddress?this.#t.value=t.formattedAddress:this.#t&&(this.#t.value=""),this.#t&&(this.#t.setAttribute("aria-expanded","false"),this.#t.setAttribute("aria-activedescendant",""),this.#t.blur()),this.#a=[],this.#s=-1,this.#i&&(this.#i.innerHTML="",this.#i.style.display="none"),e&&this._refreshToken()}_resetLiClasses(){this.#i&&Array.from(this.#i.children).forEach(e=>{this.#e.classes.li_current.split(" ").forEach(i=>e.classList.remove(i));const t=e.querySelector("button");t&&this.#e.classes.li_button_current.split(" ").forEach(i=>t.classList.remove(i))})}_onKeyDown(e){if(this._resetLiClasses(),e.key==="Escape"&&(e.preventDefault(),this.#e.classes.kbd_active.split(" ").forEach(t=>this.#r?.classList.add(t)),setTimeout(()=>this.#e.classes.kbd_active.split(" ").forEach(t=>this.#r?.classList.remove(t)),300),this._reset(!0)),!(!this.#a.length||!this.#i||this.#i.style.display==="none"))if(e.key==="ArrowDown"){e.preventDefault(),this.#s=Math.min(this.#s+1,this.#a.length-1),this.#s<0&&(this.#s=0);const t=this.#i.children.item(this.#s);if(t){const i=t.querySelector("button");this.#e.classes.li_current.split(" ").forEach(s=>t.classList.add(s)),i&&this.#e.classes.li_button_current.split(" ").forEach(s=>i.classList.add(s)),t.scrollIntoView({block:"nearest"}),this.#t.setAttribute("aria-activedescendant",t.id)}this.#e.classes.kbd_active.split(" ").forEach(i=>this.#h?.classList.add(i)),setTimeout(()=>this.#e.classes.kbd_active.split(" ").forEach(i=>this.#h?.classList.remove(i)),300)}else if(e.key==="ArrowUp"){e.preventDefault(),this.#s=Math.max(this.#s-1,0);const t=this.#i.children.item(this.#s);if(t){const i=t.querySelector("button");this.#e.classes.li_current.split(" ").forEach(s=>t.classList.add(s)),i&&this.#e.classes.li_button_current.split(" ").forEach(s=>i.classList.add(s)),t.scrollIntoView({block:"nearest"})}this.#e.classes.kbd_active.split(" ").forEach(i=>this.#c?.classList.add(i)),setTimeout(()=>this.#e.classes.kbd_active.split(" ").forEach(i=>this.#c?.classList.remove(i)),300)}else e.key==="Enter"&&(e.preventDefault(),this.#s>=0&&this.#s<this.#a.length&&this._onPlaceSelected(this.#a[this.#s].place))}_getAddressComponent(e,t){return e.addressComponents?.find(i=>i.types.includes(t))?.longText||""}_createButtonElement(e){const t=document.createElement("button");return t.tabIndex=e+1,t.className=this.#e.classes.li_button,t}_createDivElement(e){const t=document.createElement("div");return e&&(t.className=e),t}_createMapPinIconElement(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("width","24"),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.setAttribute("stroke","currentColor"),e.setAttribute("stroke-width","2"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("class",this.#e.classes.map_icon_svg),e.innerHTML=this.#e.classes.map_pin_icon,e}_createPElement(e){const t=document.createElement("p");return e&&(t.className=e),t}_createSuggestionElements(e){return this.#a=[],e.map(async(t,i)=>{let s=t.placePrediction.toPlace();const n=document.createElement("li");n.id=`option-${i+1}`,n.className=this.#e.classes.li;const a=this._createButtonElement(i);a.addEventListener("click",o=>{o.preventDefault(),this._onPlaceSelected(t.placePrediction.toPlace())});const l=this._createDivElement(this.#e.classes.li_div_container),g=this._createDivElement(this.#e.classes.li_div_one),h=this._createDivElement(this.#e.classes.li_div_two),d=this._createMapPinIconElement();g.appendChild(d);const r=this._createDivElement(this.#e.classes.li_div_p_container);g.appendChild(r);const m=this._createPElement(this.#e.classes.li_div_one_p),p=this._createPElement(this.#e.classes.li_div_one_p_secondaryText),f=this._createPElement(this.#e.classes.li_div_two_p);if(f.textContent=this._formatDistance(t.placePrediction.distanceMeters,this.#e.distance_units??"km"),r.appendChild(m),r.appendChild(p),this.#e.show_place_type&&Array.isArray(t.placePrediction.types)&&t.placePrediction.types.length>0){const o=this._createDivElement(this.#e.classes.li_div_two_p_place_type),w=this._createPElement(this.#e.classes.li_div_two_p_place_type_icon),E=this._createPElement(this.#e.classes.li_div_two_p_place_type_label),A=t.placePrediction.types.find(M=>typeof M=="string"&&M in this.#k);E.textContent=A?this.#k[A]:"Default",w.innerHTML=this.#b[E.textContent]||this.#b.Default,o.appendChild(w),o.appendChild(E),h.appendChild(o)}else h.appendChild(f);l.appendChild(g),l.appendChild(h),a.appendChild(l),n.appendChild(a);const u=t.placePrediction.mainText,c=u.text,y=u.matches;let C=0;y.sort((o,w)=>o.startOffset-w.startOffset);const k=document.createElement("span"),b=document.createElement("span");b.classList=this.#e.classes.highlight??"font-bold";for(const o of y)k.textContent+=c.substring(C,o.startOffset),o.startOffset>0&&c.charAt(o.startOffset-1)==" "&&(b.textContent+=" "),b.textContent+=c.substring(o.startOffset,o.endOffset),C=o.endOffset;const S=document.createTextNode(c.substring(C));k.appendChild(b),k.appendChild(S),m.appendChild(k);const x=t.placePrediction?.secondaryText?.text??"";return x&&(p.textContent=x),this.#a.push({id:i+1,place:s,mainText:t.placePrediction.mainText.text,secondaryText:x,description:t.placePrediction.toString()}),n.appendChild(a),n})}async _onPlaceSelected(e){let t=null;try{await e.fetchFields({fields:this.#v}),this.#e.response_type==="place"?(t=e,this.#p(e)):(t=e.toJSON(),this.#p(t))}catch(i){console.error("Error fetching place details:",i),this.#l(i)}finally{this._reset(!0,t)}}_refreshToken(){try{this.#o.sessionToken=new google.maps.places.AutocompleteSessionToken}catch(e){console.error("Error creating session token:",e),this.#l(e)}}setFetchFields(e){this._setFetchFields(e)}getFetchFields(){return this.#v}setRequestParams(e){typeof e=="object"&&!Array.isArray(e)&&e!==null&&(e.input&&typeof e.input=="string"&&(this.#t.value=e.input),this.#o={...this.#f,...e})}getRequestParams(){return this.#o}setOptions(e){if(typeof e=="object"&&!Array.isArray(e)&&e!==null){this._detachEventListeners();const t=e.classes||{};delete e.classes,this.#e={...this.#y,...e},t&&typeof t=="object"&&Object.keys(t).length>0?this.#e.classes={...this.#g,...t}:this.#e.classes={...this.#g},this.#e.show_place_type&&this.#e.distance&&(this.#e.distance=!1),this._initialiseDebouncedRequest(),this._createPACStructure(),this.#t&&this._attachedEventListeners()}}getOptions(){return this.#e}async setInputValue(e,t){try{const{Geocoder:i}=await google.maps.importLibrary("geocoding"),n=await new i().geocode({location:{lat:e,lng:t}});if(n.results&&n.results.length>0){const a=n.results[0].place_id,l=new google.maps.places.Place({id:a});await l.fetchFields({fields:this.#v}),!this.#e.clear_input&&l.formattedAddress&&(this.#t.value=l.formattedAddress),this.#e.response_type==="place"?this.#p(l):this.#p(l.toJSON())}else throw new Error("No results found for the provided coordinates")}catch(i){console.error("Error in setInputValue:",i),this.#l(i)}}clear(){this._reset(!0)}focus(){this.#t&&this.#t.focus()}destroy(){this._detachEventListeners(),this.#u=null,this.#d=null,this.#m=null,this.#w=null,this.#e=null,this.#o=null,this.#t=null,this.#n=null,this.#i=null,this.#r=null,this.#c=null,this.#h=null,this.#a=null,this.#s=-1,this.#p=null,this.#l=null,this.#_=null}}_.PlacesAutocomplete=v,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=places-autocomplete.umd.cjs.map
